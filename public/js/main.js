const chatForm=document.querySelector("#chat-form"),chatMessage=document.querySelector(".chat-messages"),{username:username,room:room}=Qs.parse(location.search,{ignoreQueryPrefix:!0}),socket=io();function outputMessage(e){const s=document.createElement("div");s.classList.add("message"),s.innerHTML=`<p class="meta">${e.user}<span>${e.time}</span></p>\n  <p class="text">${e.text}\n  </p>`,document.querySelector(".chat-messages").appendChild(s)}socket.emit("join",{username:username,room:room}),socket.on("message",e=>{outputMessage(e),chatMessage.scrollTop=chatMessage.scrollHeight}),chatForm.addEventListener("submit",e=>{e.preventDefault();const s=e.target.elements.msg.value;socket.emit("chatMessage",s),e.target.elements.msg.value=""}),socket.on("roomUsers",e=>{console.log(e);let s="";document.getElementById("room-name").innerText=e.room;for(let t=0;t<e.users.length;t++)s+=`<li>${e.users[t].username}</li>`;document.getElementById("users").innerHTML=s});